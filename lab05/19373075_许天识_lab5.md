#### 学号：19373075

#### 姓名：许天识

## 思路方法

​	在条件语句中，增加了“语句块”的概念，因此需要将原先代码的都输出到一个地方，改成输出到不同的语句块即可。

## 具体细节

### 语句块

​	新增语句块数组，其数组下标就作为语句块的寄存器标识，语句块为一个类，存有代码等信息方便拓展：

```java
private final ArrayList<CodeBlock> codeBlocks = new ArrayList<>();
public class CodeBlock {
    private String register;
    private StringBuffer result = new StringBuffer();
}
```

### 代码该写到哪个语句块？

​	经过观察，一个if语句会将代码块分成3段或者4段。

​	如果if没有跟else，则语句块被分成：if之前，if内，if之后三个语句块；如果if有跟else，则会增加一个else语句块。if之前的为当前代码块，if内的需要分配一个新的代码块，else也要分配一个新的代码块，等if结束之后，再分配一个代码块给If之后。代码块下标是一个全局变量，这样就知道中间代码该输出到哪里。

​	需要注意：在if和else的代码块结束之后，需要增加无条件跳转语句，跳转到if语句之后的代码块。同时，初始代码块需要增加"br"判断跳转语句：要么是If和else之间的选择，要么是if和if之后代码的选择，这取决于有没有else。代码块分配是序号递增的，如果要得到某个特点代码块序号，用一个临时变量保存即可。
